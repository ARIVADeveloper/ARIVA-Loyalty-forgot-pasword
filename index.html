<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reset PIN</title>
  <link rel="stylesheet" href="assets/css/styles.css">
  <script type="module" src="assets/js/main.js"></script>
</head>
<body>
  <!-- Error Modal -->
  <div id="errorModal" class="modal">
    <div class="modal-content">
      <div class="modal-spinner"></div>
      <svg class="modal-icon" viewBox="0 0 24 24"></svg>
      <h3 class="modal-title"></h3>
      <p class="modal-message"></p>
      <p class="modal-subtitle"></p>
      <button type="button" class="modal-button"></button>
    </div>
  </div>

  <div class="container">
    <img src="assets/ariva-logo.png" alt="ARIVA Logo" class="logo" />
    <h2>Reset Your PIN</h2>
    <div class="form-group">
      <div class="input-container">
        <label class="input-label" for="pin">New PIN</label>
        <input 
          type="password" 
          id="pin" 
          placeholder="Enter 5-digit PIN" 
          maxlength="5"
          inputmode="numeric"
          pattern="\d*"
          autocomplete="off"
          oninput="validatePins()"
          onkeypress="return onlyNumberKey(event)"
        />
        <svg class="input-icon eye-icon" onclick="togglePinVisibility('pin')" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M12 5.25C7.92 5.25 4.25 7.92 4.25 12C4.25 16.08 7.92 18.75 12 18.75C16.08 18.75 19.75 16.08 19.75 12C19.75 7.92 16.08 5.25 12 5.25ZM12 15.75C10.07 15.75 8.5 14.18 8.5 12.25C8.5 10.32 10.07 8.75 12 8.75C13.93 8.75 15.5 10.32 15.5 12.25C15.5 14.18 13.93 15.75 12 15.75Z" stroke="currentColor" stroke-width="1.5"/>
        </svg>
        <span class="validation-message"></span>
      </div>
      <div class="input-container">
        <label class="input-label" for="confirmPin">Confirm PIN</label>
        <input 
          type="password" 
          id="confirmPin" 
          placeholder="Re-enter 5-digit PIN" 
          maxlength="5"
          inputmode="numeric"
          pattern="\d*"
          autocomplete="off"
          oninput="validatePins()"
          onkeypress="return onlyNumberKey(event)"
        />
        <svg class="input-icon eye-icon" onclick="togglePinVisibility('confirmPin')" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M12 5.25C7.92 5.25 4.25 7.92 4.25 12C4.25 16.08 7.92 18.75 12 18.75C16.08 18.75 19.75 16.08 19.75 12C19.75 7.92 16.08 5.25 12 5.25ZM12 15.75C10.07 15.75 8.5 14.18 8.5 12.25C8.5 10.32 10.07 8.75 12 8.75C13.93 8.75 15.5 10.32 15.5 12.25C15.5 14.18 13.93 15.75 12 15.75Z" stroke="currentColor" stroke-width="1.5"/>
        </svg>
        <span class="validation-message"></span>
      </div>
    </div>
    <button onclick="resetPin()" disabled>
      <span>Reset PIN</span>
      <div class="spinner"></div>
    </button>
    <p id="message"></p>
  </div>
  <script>
    function onlyNumberKey(evt) {
      // Only ASCII characters 48-57 (0-9)
      var ASCIICode = (evt.which) ? evt.which : evt.keyCode;
      if (ASCIICode > 31 && (ASCIICode < 48 || ASCIICode > 57)) {
        return false;
      }
      // Check length
      const input = evt.target;
      if (input.value.length >= 5) {
        return false;
      }
      return true;
    }

    function togglePinVisibility(inputId) {
      const input = document.getElementById(inputId);
      const icon = input.nextElementSibling;
      
      if (input.type === "password") {
        input.type = "number";
        icon.innerHTML = `<path d="M12 5.25C4.5 5.25 1.5 12 1.5 12C1.5 12 4.5 18.75 12 18.75C19.5 18.75 22.5 12 22.5 12C22.5 12 19.5 5.25 12 5.25ZM12 15.75C10.07 15.75 8.5 14.18 8.5 12.25C8.5 10.32 10.07 8.75 12 8.75C13.93 8.75 15.5 10.32 15.5 12.25C15.5 14.18 13.93 15.75 12 15.75Z" stroke="currentColor" stroke-width="1.5"/>`;
      } else {
        input.type = "password";
        icon.innerHTML = `<path d="M12 5.25C7.92 5.25 4.25 7.92 4.25 12C4.25 16.08 7.92 18.75 12 18.75C16.08 18.75 19.75 16.08 19.75 12C19.75 7.92 16.08 5.25 12 5.25ZM12 15.75C10.07 15.75 8.5 14.18 8.5 12.25C8.5 10.32 10.07 8.75 12 8.75C13.93 8.75 15.5 10.32 15.5 12.25C15.5 14.18 13.93 15.75 12 15.75Z" stroke="currentColor" stroke-width="1.5"/>`;
      }
    }
  </script>
</body>
</html>
</html>
